@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 220 20% 97%;
    --foreground: 224 40% 10%;
    --card: 0 0% 100%;
    --card-foreground: 224 40% 10%;
    --popover: 0 0% 100%;
    --popover-foreground: 224 40% 10%;
    --primary: 230 70% 56%;
    --primary-foreground: 0 0% 100%;
    --secondary: 220 16% 93%;
    --secondary-foreground: 224 30% 18%;
    --muted: 220 16% 93%;
    --muted-foreground: 220 10% 50%;
    --accent: 230 60% 96%;
    --accent-foreground: 230 50% 30%;
    --destructive: 0 72% 56%;
    --destructive-foreground: 0 0% 100%;
    --success: 152 60% 42%;
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 38 100% 10%;
    --border: 220 16% 90%;
    --input: 220 16% 90%;
    --ring: 230 70% 56%;
    --radius: 1rem;

    /* Glass tokens */
    --glass-bg: 0 0% 100% / 0.6;
    --glass-border: 0 0% 100% / 0.7;
    --glass-blur: 20px;
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);
    --glass-shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.08);

    /* Glow tokens */
    --glow-primary: 230 70% 56% / 0.15;
    --glow-success: 152 60% 42% / 0.12;
    --glow-destructive: 0 72% 56% / 0.12;
    --glow-warning: 38 92% 50% / 0.12;
  }

  .dark {
    --background: 228 25% 8%;
    --foreground: 220 20% 93%;
    --card: 228 22% 12%;
    --card-foreground: 220 20% 93%;
    --popover: 228 22% 12%;
    --popover-foreground: 220 20% 93%;
    --primary: 230 80% 65%;
    --primary-foreground: 228 25% 8%;
    --secondary: 228 18% 18%;
    --secondary-foreground: 220 20% 88%;
    --muted: 228 18% 18%;
    --muted-foreground: 220 12% 55%;
    --accent: 230 30% 20%;
    --accent-foreground: 230 60% 80%;
    --destructive: 0 60% 50%;
    --destructive-foreground: 0 0% 100%;
    --success: 152 55% 48%;
    --success-foreground: 152 80% 8%;
    --warning: 42 90% 55%;
    --warning-foreground: 36 92% 10%;
    --border: 228 18% 18%;
    --input: 228 18% 18%;
    --ring: 230 80% 65%;

    /* Glass tokens — dark */
    --glass-bg: 228 22% 14% / 0.5;
    --glass-border: 228 18% 22% / 0.6;
    --glass-blur: 24px;
    --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
    --glass-shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.35);

    /* Glow tokens — dark */
    --glow-primary: 230 80% 65% / 0.12;
    --glow-success: 152 55% 48% / 0.1;
    --glow-destructive: 0 60% 50% / 0.1;
    --glow-warning: 42 90% 55% / 0.1;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* Glass utility classes */
@layer components {
  .glass {
    background: hsl(var(--glass-bg));
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid hsl(var(--glass-border));
    box-shadow: var(--glass-shadow);
  }

  .glass-strong {
    background: hsl(var(--glass-bg));
    backdrop-filter: blur(calc(var(--glass-blur) * 1.5));
    -webkit-backdrop-filter: blur(calc(var(--glass-blur) * 1.5));
    border: 1px solid hsl(var(--glass-border));
    box-shadow: var(--glass-shadow-lg);
  }

  .glass-subtle {
    background: hsl(var(--glass-bg));
    backdrop-filter: blur(calc(var(--glass-blur) * 0.5));
    -webkit-backdrop-filter: blur(calc(var(--glass-blur) * 0.5));
    border: 1px solid hsl(var(--glass-border));
  }

  .glow-primary {
    box-shadow: 0 0 0 1px hsl(var(--glow-primary)), 0 4px 24px hsl(var(--glow-primary)), var(--glass-shadow);
  }

  .glow-success {
    box-shadow: 0 0 0 1px hsl(var(--glow-success)), 0 4px 24px hsl(var(--glow-success)), var(--glass-shadow);
  }

  .glow-destructive {
    box-shadow: 0 0 0 1px hsl(var(--glow-destructive)), 0 4px 24px hsl(var(--glow-destructive)), var(--glass-shadow);
  }

  .glow-warning {
    box-shadow: 0 0 0 1px hsl(var(--glow-warning)), 0 4px 24px hsl(var(--glow-warning)), var(--glass-shadow);
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-muted-foreground/15 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-muted-foreground/30;
}

/* Drag and drop styling */
.drop-zone {
  @apply border-2 border-dashed border-muted-foreground/20 rounded-2xl transition-all duration-300;
}

.drop-zone.active {
  @apply border-primary bg-primary/5;
  box-shadow: 0 0 0 4px hsl(var(--glow-primary));
}

/* Animation utilities */
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-in {
  from { transform: translateY(12px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes scale-in {
  from { transform: scale(0.96); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}

.animate-slide-in {
  animation: slide-in 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.animate-scale-in {
  animation: scale-in 0.35s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Staggered entrance animations */
.stagger-1 { animation-delay: 0.05s; animation-fill-mode: backwards; }
.stagger-2 { animation-delay: 0.1s; animation-fill-mode: backwards; }
.stagger-3 { animation-delay: 0.15s; animation-fill-mode: backwards; }
.stagger-4 { animation-delay: 0.2s; animation-fill-mode: backwards; }
.stagger-5 { animation-delay: 0.25s; animation-fill-mode: backwards; }
.stagger-6 { animation-delay: 0.3s; animation-fill-mode: backwards; }

/* Mobile utilities */
.mobile-scroll {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
}

.swipe-row {
  touch-action: pan-y;
  user-select: none;
}

@keyframes slide-up {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

@keyframes slide-down {
  from { transform: translateY(0); }
  to { transform: translateY(100%); }
}

.animate-slide-up {
  animation: slide-up 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.animate-slide-down {
  animation: slide-down 0.2s ease-in;
}

/* Pull-to-refresh spinner */
@keyframes spin {
  to { transform: rotate(360deg); }
}

.pull-spinner {
  animation: spin 0.8s linear infinite;
}

/* Bottom sheet backdrop */
.backdrop-blur-sm {
  backdrop-filter: blur(4px);
}

/* iOS keyboard handling */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .mobile-input-scroll {
    scroll-padding-bottom: 300px;
  }
}

/* Prevent text selection on swipe elements */
.no-select {
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/* Page transition */
@keyframes page-enter {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-page-enter {
  animation: page-enter 0.35s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Ambient background mesh for depth */
.bg-mesh {
  background-image:
    radial-gradient(ellipse 60% 50% at 10% 20%, hsl(var(--glow-primary)) 0%, transparent 60%),
    radial-gradient(ellipse 40% 40% at 90% 80%, hsl(var(--glow-success)) 0%, transparent 60%);
}
